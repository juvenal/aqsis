PROJECT(EQSL)

SET(EQSLAPP_SRCS
	eqsl.fl)

INCLUDE(${AQSISTYPES_SOURCE_DIR}/export.cmake)
INCLUDE_DIRECTORIES(${AQSIS_FLTK_INCLUDE_DIR})

FLTK_WRAP_UI(eqsl eqsl.fl)

INCLUDE_DIRECTORIES(${AQSIS_BOOST_INCLUDE_DIR})

ADD_EXECUTABLE(eqsl ${eqsl_FLTK_UI_SRCS} 
				${EQSLAPP_SRCS})

SET(LINKLIBS ${AQSIS_FLTK_LIBRARIES} ${AQSIS_EQSL_SYSTEM_LINKLIBS})

TARGET_LINK_LIBRARIES(eqsl ${LINKLIBS})

IF(WIN32)
	SET(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} /SUBSYSTEM:WINDOWS")
ENDIF(WIN32)

INSTALL(TARGETS eqsl 
	RUNTIME DESTINATION ${BINDIR})

#
# Add necessary resource fork to binaries linked against FLTK (OS X)
#
IF(AQSIS_RESOURCE_EXECUTABLE_FOUND)
	ADD_CUSTOM_COMMAND(TARGET eqsl
		POST_BUILD
		COMMAND ${AQSIS_RESOURCE_EXECUTABLE}
		ARGS -t APPL -o eqsl ${AQSIS_FLTK_INCLUDE_DIR}/FL/mac.r
		WORKING_DIRECTORY ${BINDIR}
	)
ENDIF(AQSIS_RESOURCE_EXECUTABLE_FOUND)
