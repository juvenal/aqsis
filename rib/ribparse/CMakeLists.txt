PROJECT(RIBPARSE)

SET(RIBPARSE_HDRS
	ribinputbuffer.h
	riblexer.h
	ribparser.h
	ribtoken.h
)
SET(RIBPARSE_SRCS
	riblexer.cpp
	ribparser.cpp
)
SET(RIBPARSE_TEST_SRCS
	riblexer_test.cpp
	ribparser_test.cpp
)

# TODO: RIBPARSE_SHARE macro.
ADD_DEFINITIONS(-DRI_EXPORTS)

INCLUDE(${AQSISTYPES_SOURCE_DIR}/export.cmake)
#INCLUDE(${RIBAPI_SOURCE_DIR}/export.cmake)

#INCLUDE_DIRECTORIES(${AQSIS_ZLIB_INCLUDE_DIR})

ADD_LIBRARY(ribparse SHARED
	${RIBPARSE_SRCS}
	${RIBPARSE_HDRS}
	${INFORES_SRCS})

#SET(LINKLIBS ${AQSIS_ZLIB_LIBRARIES})
SET(LINKLIBS)
INCLUDE(${AQSISTYPES_SOURCE_DIR}/link.cmake)
TARGET_LINK_LIBRARIES(ribparse ${LINKLIBS})
SET_TARGET_PROPERTIES(ribparse
	PROPERTIES SOVERSION ${MAJOR}
	VERSION "${MAJOR}.${MINOR}")

INSTALL(TARGETS ribparse 
	RUNTIME DESTINATION ${BINDIR}
	LIBRARY DESTINATION ${LIBDIR}
	ARCHIVE DESTINATION ${LIBDIR})

SOURCE_GROUP("Header Files" FILES ${RIBPARSE_HDRS})

# Unit tests
SET(LINKLIBS ribparse)
INCLUDE(${AQSISTYPES_SOURCE_DIR}/link.cmake)
AQSIS_ADD_TESTS("${RIBPARSE_TEST_SRCS}" "${LINKLIBS}")
