PROJECT(SHADERVM)

SET(SHADERVM_SRCS)
SET(SHADERVM_HDRS)
SET(SHADERVM_LINKLIBS)

FILE(GLOB SHADERVM_SRCS ${PROJECT_SOURCE_DIR}/*.cpp)
FILE(GLOB SHADERVM_HEADERS ${PROJECT_SOURCE_DIR}/*.h)

INCLUDE(${SHADEREXECENV_SOURCE_DIR}/local.cmake)
SET(SHADERVM_SRCS ${SHADERVM_SRCS} ${SHADEREXECENV_SRCS})

ADD_DEFINITIONS(-DSHADERVM_EXPORTS -DSHADERCONTEXT_EXPORTS)
ADD_LIBRARY(shadervm SHARED ${SHADERVM_SRCS})

INCLUDE_DIRECTORIES(${PROJECT_SOURCE_DIR})
INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/interfaces)
INCLUDE_DIRECTORIES(${BOOST_INCLUDE_DIR})

# Internal dependencies
INCLUDE(${AQSISTYPES_SOURCE_DIR}/export.cmake)
INCLUDE(${RIBAPI_SOURCE_DIR}/export.cmake)
INCLUDE(${SHADEREXECENV_SOURCE_DIR}/export.cmake)

ADD_DEFINITIONS(-DSHADERVM_EXPORTS -DSHADERCONTEXT_EXPORTS)
ADD_LIBRARY(shadervm SHARED ${SHADERVM_SRCS})

TARGET_LINK_LIBRARIES(shadervm aqsistypes)

INSTALL(TARGETS shadervm
	RUNTIME DESTINATION ${RENDERENGINEDIR}
	LIBRARY DESTINATION ${RENDERENGINEDIR}
	ARCHIVE DESTINATION ${LIBDIR})