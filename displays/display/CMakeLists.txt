PROJECT(DISPLAY)

FILE(GLOB DISPLAY_CPP_SRCS ${PROJECT_SOURCE_DIR}/*.cpp)
FILE(GLOB DISPLAY_C_SRCS ${PROJECT_SOURCE_DIR}/*.c)
FILE(GLOB DISPLAY_HDRS ${PROJECT_SOURCE_DIR}/*.h)

SET(DISPLAY_SRCS ${DISPLAY_CPP_SRCS} ${DISPLAY_C_SRCS})

ADD_DEFINITIONS(-DDISPLAY_EXPORTS)

INCLUDE(${AQSISTYPES_SOURCE_DIR}/export.cmake)
INCLUDE(${DDMANAGER_SOURCE_DIR}/export.cmake)

INCLUDE_DIRECTORIES(${AQSIS_TIFF_INCLUDE_DIR})
INCLUDE_DIRECTORIES(${AQSIS_ZLIB_INCLUDE_DIR})
INCLUDE_DIRECTORIES(${AQSIS_FLTK_INCLUDE_DIR})

ADD_LIBRARY(display SHARED ${DISPLAY_SRCS})
# Generate the display declaration for the aqsisrc file.
GET_TARGET_PROPERTY(LOCOFDISPLAY display LOCATION)
GET_FILENAME_COMPONENT(DISPLAYLIB ${LOCOFDISPLAY} NAME)

SET(LINKLIBS ${AQSIS_TIFF_LIBRARIES} ${AQSIS_ZLIB_LIBRARIES} ${AQSIS_FLTK_LIBRARIES} ${AQSIS_DISPLAY_SYSTEM_LINKLIBS})
INCLUDE(${AQSISTYPES_SOURCE_DIR}/link.cmake)

TARGET_LINK_LIBRARIES(display ${LINKLIBS})

INSTALL(TARGETS display 
	RUNTIME DESTINATION ${DISPLAYSDIR}
	LIBRARY DESTINATION ${DISPLAYSDIR}
	ARCHIVE DESTINATION ${LIBDIR})
