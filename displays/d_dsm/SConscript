Import('env', 'embedManifest')
d_dsmenv = env.Copy()
d_dsmenv.AppendUnique(CPPPATH=['#/renderer/ddmanager'])
d_dsmenv.AppendUnique(CPPDEFINES=['D_DSM_EXPORTS'])

d_dsm_sources = Split("""
	d_dsm.cpp
	dtexoutput.cpp
	displayhelpers.c
	deeptileadaptor.cpp
	""")

d_dsm_headers =  Split("""
	dtexoutput.h
	deeptileadaptor.h
	""")


d_dsmenv.AppendUnique(LIBS = ['aqsistypes', '$tiff_lib'])
d_dsmenv.AppendUnique(CPPPATH=['$tiff_include_path'])

# Set any platform specific target options.
d_dsmenv.UseTargetOptions('dsm')
#d_dsmenv.UseTargetOptions('d_dsm')

dsm = d_dsmenv.SharedLibrary('d_dsm', d_dsm_sources)
#d_dsm = d_dsmenv.SharedLibrary('d_dsm', d_dsm_sources)

embedManifest(env, d_dsmenv, dsm, 'DLL')

d_dsmenv.Install('$DISPLAYSDIR', dsm)

Return('dsm')

env.Distribute(d_dsm_sources)
env.Distribute(d_dsm_headers)
env.Distribute('SConscript')
