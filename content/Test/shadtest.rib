version 3.03

Option "limits" "eyesplits" [10]

# Output Z data only
Display "shadow.z" "zfile" "z"

Clipping 0.0001 10

Sides 2

Format 256 256 1
ShadingRate 2

FrameBegin 1

# Placecam camera transform
Projection "perspective" "fov" [57.30]
Rotate -35.26 1.00 0.00 0.00
Rotate 45.00 0.00 1.00 0.00
Translate -5.00 -5.00 5.00

WorldBegin
  Surface "null"
  Sphere 1 -1 1 360

  Orientation "rh"
  Patch "bilinear" "P" [-10 -1 -10
                         10 -1 -10
                        -10 -1  10
                         10 -1  10]
WorldEnd

FrameEnd

MakeShadow "shadow.z" "shadow.map"

#
#
# Now render the scene using the shadow map just calculated.
#
#
Display "shadtest.tif" "file" "rgba"
Format 200 150 1

PixelSamples 2 2
PixelFilter "gaussian" 2 2
Clipping 0.2 10
ShadingRate 1

FrameBegin 2

Projection "perspective" "fov" 45
Translate 0 0 5
Rotate -20 1 0 0

Declare "shadowname" "uniform string"
Declare "MyP" " varying point[5]"

WorldBegin
  LightSource "ambientlight" 0 "intensity" [0.2]
  LightSource "shadowspot" 1 "intensity" [75] "from" [5 5 -5] "to" [0 0 0] "coneangle" [0.5] "shadowname" ["shadow.map"]

  Color [1 1 1]
  Surface "matte"
  Sphere 1 -1 1 360

  Orientation "rh"
  Patch "bilinear" "P" [-10 -1 -10
                         10 -1 -10
                        -10 -1  10
                         10 -1  10]
WorldEnd

FrameEnd