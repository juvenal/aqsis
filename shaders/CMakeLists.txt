PROJECT(SHADERS)

FILE(GLOB SHADER_SRCS ${PROJECT_SOURCE_DIR}/*.sl)

ADD_CUSTOM_TARGET(shaders echo "Building default shaders")
FOREACH(SHADER ${SHADER_SRCS})
	GET_FILENAME_COMPONENT(SHADER_BASENAME ${SHADER} NAME_WE)
	SET(SHADER_OUTPUT_NAME ${PROJECT_BINARY_DIR}/${SHADER_BASENAME}.slx)
	ADD_CUSTOM_COMMAND( 
		SOURCE ${SHADER}
		COMMAND ${AQSL_EXECUTABLE} 
		ARGS -o ${SHADER_OUTPUT_NAME}.slx ${SHADER}
		TARGET shaders
		OUTPUTS ${SHADER_OUTPUT_NAME}
		DEPENDS ${SHADER} AQSL_EXECUTABLE
		COMMENT "Building shader ${SHADER}"
	)
ENDFOREACH(SHADER)
